<?xml version="1.0" encoding="euc-kr" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
					 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
					 
<mapper namespace="com.mycompany.webapp.dao.DrugsInjectionsDao">
	
	<select id="selectByTreatmentDrugsInjection" resultType="drugsInjection">
		select
			d.DRUG_INJECTION_DRUG_INJECTION_LIST_ID, 
	        dl.DRUG_INJECTION_LIST_NAME,
	        dl.DRUG_INJECTION_LIST_CATEGORY,
	        u.USER_NAME,
	        t.TREATMENT_DATE,
	        d.DRUG_INJECTION_TREATMENT_ID,
	        d.DRUG_INJECTION_ID,
	        d.DRUG_INJECTION_PATIENT_ID
	   from
			drugs_injections d,
	        drugs_injections_lists dl,
	        users u,
	        treatments t
		where
			d.DRUG_INJECTION_DRUG_INJECTION_LIST_ID = dl.DRUG_INJECTION_LIST_ID and
	        d.DRUG_INJECTION_ID_DOCTOR_ID = u.user_id and
	        d.DRUG_INJECTION_TREATMENT_ID = t.TREATMENT_ID and
	        d.DRUG_INJECTION_TREATMENT_ID = #{treatment_id};
	</select>
</mapper>